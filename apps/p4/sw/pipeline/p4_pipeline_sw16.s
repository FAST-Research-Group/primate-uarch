# R0: 0
# R1: ETHERNET
# R2: IPV4
# R3: TCP
# R4: UDP
# R20: TMP
# R21: PORT
# R22: HDR_VALID
#
# SRC_POS=0 16 32 48 64 72 80 96 112 
# SRC_MODE=8 16 48 64 72 80 160 160 
#ALU0;ALU1;BFU0;MEM;INPUT_OUTPUT;BRANCH;
#
LUi,R20,0,1,4096;NOP;NOP;NOP;EXTRACTi,R1,X1,14;NOP;#
ADDi,R0,0,1,R1,7,1,0;ADDi,R20,0,1,R20,0,1,-2048;NOP;NOP;NOP;BNE,X0,X1,40;#
NOP;ADDi,R22,0,1,R0,0,1,1;NOP;NOP;EXTRACTi,R2,X1,20;NOP;#
ADDi,R0,0,0,R2,5,0,0;ADDi,R0,0,1,R0,0,1,6;NOP;NOP;NOP;BNE,X0,X1,8;#
ADDi,R0,0,0,R1,0,2,0;ADDi,R22,0,1,R0,0,1,2;MATCH,R20,X0,0;NOP;EXTRACTi_DONE,R3,X1,20;JR,X2,7;#
ADDi,R0,0,0,R2,5,0,0;ADDi,R0,0,1,R0,0,1,17;NOP;NOP;NOP;BNE,X0,X1,8;#
ADDi,R0,0,0,R1,0,2,0;ADDi,R22,0,1,R0,0,1,3;MATCH,R20,X0,0;NOP;EXTRACTi_DONE,R4,X1,8;JR,X2,7;#
ADDi,R0,0,0,R1,0,2,0;NOP;MATCH,R20,X0,0;NOP;PARSE_DONE;JR,X2,7;#
ADDi,R0,0,0,R1,0,2,0;ADDi,R21,0,1,R20,0,1,0;MATCH,R20,X0,1;NOP;NOP;JR,X2,9;#
ADDi,R0,0,0,R1,0,2,0;ADDi,R21,0,1,R0,0,1,511;MATCH,R20,X0,1;NOP;NOP;JR,X2,9;#
ADDi,R0,0,0,R1,0,2,0;ADDi,R21,0,1,R20,0,1,0;MATCH,R20,X0,2;NOP;NOP;JR,X2,11;#
ADDi,R0,0,0,R1,0,2,0;NOP;MATCH,R20,X0,2;NOP;NOP;JR,X2,11;#
ADDi,R0,0,0,R1,0,2,0;ADDi,R21,0,1,R20,0,1,0;MATCH,R20,X0,3;NOP;NOP;JR,X2,13;#
ADDi,R0,0,0,R1,0,2,0;NOP;MATCH,R20,X0,3;NOP;NOP;JR,X2,13;#
ADDi,R0,0,0,R1,0,2,0;ADDi,R21,0,1,R20,0,1,0;MATCH,R20,X0,4;NOP;NOP;JR,X2,15;#
ADDi,R0,0,0,R1,0,2,0;NOP;MATCH,R20,X0,4;NOP;NOP;JR,X2,15;#
ADDi,R0,0,0,R1,0,2,0;ADDi,R21,0,1,R20,0,1,0;MATCH,R20,X0,5;NOP;NOP;JR,X2,17;#
ADDi,R0,0,0,R1,0,2,0;NOP;MATCH,R20,X0,5;NOP;NOP;JR,X2,17;#
ADDi,R0,0,0,R1,0,2,0;ADDi,R21,0,1,R20,0,1,0;MATCH,R20,X0,6;NOP;NOP;JR,X2,19;#
ADDi,R0,0,0,R1,0,2,0;NOP;MATCH,R20,X0,6;NOP;NOP;JR,X2,19;#
ADDi,R0,0,0,R1,0,2,0;ADDi,R21,0,1,R20,0,1,0;MATCH,R20,X0,7;NOP;NOP;JR,X2,21;#
ADDi,R0,0,0,R1,0,2,0;NOP;MATCH,R20,X0,7;NOP;NOP;JR,X2,21;#
ADDi,R0,0,0,R1,0,2,0;ADDi,R21,0,1,R20,0,1,0;MATCH,R20,X0,8;NOP;NOP;JR,X2,23;#
ADDi,R0,0,0,R1,0,2,0;NOP;MATCH,R20,X0,8;NOP;NOP;JR,X2,23;#
ADDi,R0,0,0,R1,0,2,0;ADDi,R21,0,1,R20,0,1,0;MATCH,R20,X0,9;NOP;NOP;JR,X2,25;#
ADDi,R0,0,0,R1,0,2,0;NOP;MATCH,R20,X0,9;NOP;NOP;JR,X2,25;#
ADDi,R0,0,0,R1,0,2,0;ADDi,R21,0,1,R20,0,1,0;MATCH,R20,X0,10;NOP;NOP;JR,X2,27;#
ADDi,R0,0,0,R1,0,2,0;NOP;MATCH,R20,X0,10;NOP;NOP;JR,X2,27;#
ADDi,R0,0,0,R1,0,2,0;ADDi,R21,0,1,R20,0,1,0;MATCH,R20,X0,11;NOP;NOP;JR,X2,29;#
ADDi,R0,0,0,R1,0,2,0;NOP;MATCH,R20,X0,11;NOP;NOP;JR,X2,29;#
ADDi,R0,0,0,R1,0,2,0;ADDi,R21,0,1,R20,0,1,0;MATCH,R20,X0,12;NOP;NOP;JR,X2,31;#
ADDi,R0,0,0,R1,0,2,0;NOP;MATCH,R20,X0,12;NOP;NOP;JR,X2,31;#
ADDi,R0,0,0,R1,0,2,0;ADDi,R21,0,1,R20,0,1,0;MATCH,R20,X0,13;NOP;NOP;JR,X2,33;#
ADDi,R0,0,0,R1,0,2,0;NOP;MATCH,R20,X0,13;NOP;NOP;JR,X2,33;#
ADDi,R0,0,0,R1,0,2,0;ADDi,R21,0,1,R20,0,1,0;MATCH,R20,X0,14;NOP;NOP;JR,X2,35;#
ADDi,R0,0,0,R1,0,2,0;NOP;MATCH,R20,X0,14;NOP;NOP;JR,X2,35;#
ADDi,R0,0,0,R1,0,2,0;ADDi,R21,0,1,R20,0,1,0;MATCH,R20,X0,15;NOP;NOP;JR,X2,37;#
ADDi,R0,0,0,R1,0,2,0;NOP;MATCH,R20,X0,15;NOP;NOP;JR,X2,37;#
NOP;ADDi,R21,0,1,R20,0,1,0;NOP;NOP;OUTPUT_META,R21,X1,0;J,8;#
NOP;ADDi,R21,0,1,R21,0,1,0;;NOP;NOP;OUTPUT_META,R21,X1,0;NOP;#
ADDi,R0,0,1,R22,0,1,0;ADDi,R0,0,1,R0,0,1,1;NOP;NOP;EMIT,R1,X1,14;BLT,X0,X1,20;#
ADDi,R0,0,1,R22,0,1,0;ADDi,R0,0,1,R0,0,1,2;NOP;NOP;EMIT,R2,X1,20;BLT,X0,X1,16;#
ADDi,R0,0,1,R22,0,1,0;ADDi,R0,0,1,R0,0,1,2;NOP;NOP;NOP;BGT,X0,X1,8;#
NOP;NOP;NOP;NOP;EMIT_DONE,R3,X1,20;END;#
NOP;NOP;NOP;NOP;EMIT_DONE,R4,X1,8;END;#
NOP;NOP;NOP;NOP;DEPARSE_DONE;END;#